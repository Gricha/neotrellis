#include "alphabet.h"

std::vector<std::vector<bool>> convert_letter_to_bitmap(char letter) {
  Serial.print("Converting letter: ");
  Serial.println(letter);
  if (letter == 'A') {
    return {
        {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {1, 0, 0, 1}, {1, 1, 1, 1}, {1, 0, 0, 1}, {1, 0, 0, 1},
    };
  } else if (letter == ' ') {
    return {
        {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0},
    };
  } else if (letter == 'a') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 1, 1, 0},
        {0, 0, 0, 1}, {0, 1, 1, 1}, {1, 0, 0, 1}, {0, 1, 1, 1},
    };
  } else if (letter == 'b') {
    return {
        {0, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0},
        {1, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 1, 1, 0},
    };
  } else if (letter == 'B') {
    return {
        {0, 0, 0, 0}, {1, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {1, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 1, 1, 0},
    };
  } else if (letter == 'C') {
    return {
        {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 0},
        {1, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == 'D') {
    return {
        {0, 0, 0, 0}, {1, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 1, 1, 0},
    };
  } else if (letter == 'E') {
    return {
        {0, 0, 0, 0}, {1, 1, 1, 1}, {1, 0, 0, 0}, {1, 0, 0, 0},
        {1, 1, 1, 0}, {1, 0, 0, 0}, {1, 0, 0, 0}, {1, 1, 1, 1},
    };
  } else if (letter == 'F') {
    return {
        {0, 0, 0, 0}, {1, 1, 1, 1}, {1, 0, 0, 0}, {1, 0, 0, 0},
        {1, 1, 1, 0}, {1, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0},
    };
  } else if (letter == 'G') {
    return {
        {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 0},
        {1, 0, 0, 0}, {1, 0, 1, 1}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == 'H') {
    return {
        {0, 0, 0, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {1, 1, 1, 1}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1},
    };
  } else if (letter == 'I') {
    return {
        {0, 0, 0}, {1, 1, 1}, {0, 1, 0}, {0, 1, 0},
        {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {1, 1, 1},
    };
  } else if (letter == 'J') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 1}, {0, 0, 0, 1}, {0, 0, 0, 1},
        {0, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == 'K') {
    return {
        {0, 0, 0, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 1, 0},
        {1, 1, 0, 0}, {1, 0, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
    };
  } else if (letter == 'L') {
    return {
        {0, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0},
        {1, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0}, {1, 1, 1, 1},
    };
  } else if (letter == 'M') {
    return {
        {0, 0, 0, 0, 0}, {1, 0, 0, 0, 1}, {1, 1, 0, 1, 1}, {1, 0, 1, 0, 1},
        {1, 0, 0, 0, 1}, {1, 0, 0, 0, 1}, {1, 0, 0, 0, 1}, {1, 0, 0, 0, 1},
    };
  } else if (letter == 'N') {
    return {
        {0, 0, 0, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 1, 0, 1},
        {1, 0, 1, 1}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1},
    };
  } else if (letter == 'O') {
    return {
        {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == 'P') {
    return {
        {0, 0, 0, 0}, {1, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {1, 1, 1, 0}, {1, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0},
    };
  } else if (letter == 'Q') {
    return {
        {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 1, 0}, {0, 1, 0, 1},
    };
  } else if (letter == 'R') {
    return {
        {0, 0, 0, 0}, {1, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {1, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1},
    };
  } else if (letter == 'S') {
    return {
        {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 0},
        {0, 1, 1, 0}, {0, 0, 0, 1}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == 'T') {
    return {
        {0, 0, 0, 0, 0}, {1, 1, 1, 1, 1}, {0, 0, 1, 0, 0}, {0, 0, 1, 0, 0},
        {0, 0, 1, 0, 0}, {0, 0, 1, 0, 0}, {0, 0, 1, 0, 0}, {0, 0, 1, 0, 0},
    };
  } else if (letter == 'U') {
    return {
        {0, 0, 0, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == 'V') {
    return {
        {0, 0, 0, 0, 0}, {1, 0, 0, 0, 1}, {1, 0, 0, 0, 1}, {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1}, {1, 0, 0, 0, 1}, {0, 1, 0, 1, 0}, {0, 0, 1, 0, 0},
    };
  } else if (letter == 'W') {
    return {
        {0, 0, 0, 0, 0}, {1, 0, 0, 0, 1}, {1, 0, 0, 0, 1}, {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1}, {1, 0, 1, 0, 1}, {1, 0, 1, 0, 1}, {0, 1, 0, 1, 0},
    };
  } else if (letter == 'X') {
    return {
        {0, 0, 0, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1},
    };
  } else if (letter == 'Y') {
    return {
        {0, 0, 0, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {0, 1, 1, 1}, {0, 0, 0, 1}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == 'Z') {
    return {
        {0, 0, 0, 0}, {1, 1, 1, 1}, {0, 0, 0, 1}, {0, 0, 0, 1},
        {0, 1, 1, 0}, {1, 0, 0, 0}, {1, 0, 0, 0}, {1, 1, 1, 1},
    };
  } else if (letter == 'b') {
    return {
        {0, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0},
        {1, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 1, 1, 0},
    };
  } else if (letter == 'c') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 1, 1, 0},
        {1, 0, 0, 1}, {1, 0, 0, 0}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == 'd') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 1}, {0, 0, 0, 1}, {0, 0, 0, 1},
        {0, 1, 1, 1}, {1, 0, 0, 1}, {1, 0, 0, 1}, {0, 1, 1, 1},
    };
  } else if (letter == 'e') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 1, 1, 0},
        {1, 0, 0, 1}, {1, 1, 1, 1}, {1, 0, 0, 0}, {0, 1, 1, 1},
    };
  } else if (letter == 'f') {
    return {
        {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 0},
        {1, 1, 1, 0}, {1, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0},
    };
  } else if (letter == 'g') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1},
        {1, 0, 0, 0}, {1, 0, 1, 1}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == 'h') {
    return {
        {0, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0},
        {1, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1},
    };
  } else if (letter == 'i') {
    return {
        {0}, {1}, {0}, {0}, {1}, {1}, {1}, {1},
    };
  } else if (letter == 'j') {
    return {
        {0, 0, 0, 0, 0}, {0, 0, 1, 0, 0}, {0, 0, 0, 0, 0}, {0, 0, 1, 0, 0},
        {0, 0, 1, 0, 0}, {0, 0, 1, 0, 0}, {1, 0, 1, 0, 0}, {0, 1, 0, 0, 0},
    };
  } else if (letter == 'k') {
    return {
        {0, 0, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 1}, {1, 0, 1, 0},
        {1, 1, 0, 0}, {1, 0, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
    };
  } else if (letter == 'l') {
    return {
        {0, 0, 0}, {1, 1, 0}, {0, 1, 0}, {0, 1, 0},
        {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 0, 1},
    };
  } else if (letter == 'm') {
    return {
        {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0},
        {1, 1, 1, 1, 0}, {1, 0, 1, 0, 1}, {1, 0, 1, 0, 1}, {1, 0, 1, 0, 1},
    };
  } else if (letter == 'n') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0},
        {1, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1},
    };
  } else if (letter == 'o') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0},
        {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == 'p') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1},
        {1, 0, 0, 1}, {1, 1, 1, 0}, {1, 0, 0, 0}, {1, 0, 0, 0},
    };
  } else if (letter == 'q') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1},
        {1, 0, 0, 1}, {0, 1, 1, 1}, {0, 0, 0, 1}, {0, 0, 0, 1},
    };
  } else if (letter == 'r') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0},
        {1, 0, 1, 1}, {1, 1, 0, 0}, {1, 0, 0, 0}, {1, 0, 0, 0},
    };
  } else if (letter == 's') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 1, 1, 1},
        {1, 0, 0, 0}, {0, 1, 1, 0}, {0, 0, 0, 1}, {1, 1, 1, 0},
    };
  } else if (letter == 't') {
    return {
        {0, 0, 0, 0}, {0, 1, 0, 0}, {0, 1, 0, 0}, {1, 1, 1, 1},
        {0, 1, 0, 0}, {0, 1, 0, 0}, {0, 1, 0, 1}, {0, 0, 1, 0},
    };
  } else if (letter == 'u') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0},
        {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1}, {0, 1, 1, 1},
    };
  } else if (letter == 'v') {
    return {
        {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0},
        {1, 0, 0, 0, 1}, {1, 0, 0, 0, 1}, {0, 1, 0, 1, 0}, {0, 0, 1, 0, 0},
    };
  } else if (letter == 'w') {
    return {
        {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0}, {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1}, {1, 0, 1, 0, 1}, {1, 0, 1, 0, 1}, {0, 1, 0, 1, 0},
    };
  } else if (letter == 'x') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {1, 0, 0, 1},
        {1, 0, 0, 1}, {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
    };
  } else if (letter == 'y') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {0, 1, 1, 1}, {0, 0, 0, 1}, {0, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == 'z') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {1, 1, 1, 1},
        {0, 0, 0, 1}, {0, 1, 1, 0}, {1, 0, 0, 0}, {1, 1, 1, 1},
    };
  } else if (letter == '1') {
    return {
        {0, 0, 0}, {0, 1, 0}, {1, 1, 0}, {0, 1, 0},
        {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {1, 1, 1},
    };
  } else if (letter == '2') {
    return {
        {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}, {0, 0, 0, 1},
        {0, 0, 1, 0}, {0, 1, 0, 0}, {1, 0, 0, 0}, {1, 1, 1, 1},
    };
  } else if (letter == '3') {
    return {
        {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}, {0, 0, 0, 1},
        {0, 1, 1, 0}, {0, 0, 0, 1}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == '4') {
    return {
        {0, 0, 0, 0}, {0, 0, 1, 1}, {0, 1, 0, 1}, {1, 0, 0, 1},
        {1, 1, 1, 1}, {0, 0, 0, 1}, {0, 0, 0, 1}, {0, 0, 0, 1},
    };
  } else if (letter == '5') {
    return {
        {0, 0, 0, 0}, {1, 1, 1, 1}, {1, 0, 0, 0}, {1, 1, 1, 0},
        {0, 0, 0, 1}, {0, 0, 0, 1}, {0, 0, 0, 1}, {1, 1, 1, 0},
    };
  } else if (letter == '6') {
    return {
        {0, 0, 0, 0}, {0, 0, 1, 0}, {0, 1, 0, 0}, {1, 0, 0, 0},
        {1, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == '7') {
    return {
        {0, 0, 0, 0}, {1, 1, 1, 1}, {0, 0, 0, 1}, {0, 0, 0, 1},
        {0, 0, 1, 0}, {0, 1, 0, 0}, {0, 1, 0, 0}, {0, 1, 0, 0},
    };
  } else if (letter == '8') {
    return {
        {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == '9') {
    return {
        {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1},
        {0, 1, 1, 1}, {0, 0, 0, 1}, {0, 0, 1, 0}, {0, 1, 0, 0},
    };
  } else if (letter == '0') {
    return {
        {0, 1, 1, 0}, {1, 0, 0, 1}, {1, 0, 0, 1}, {1, 0, 1, 1},
        {1, 1, 0, 1}, {1, 0, 0, 1}, {1, 0, 0, 1}, {0, 1, 1, 0},
    };
  } else if (letter == '?') {
    return {
        {0, 0, 0, 0}, {0, 1, 1, 0}, {1, 0, 0, 1}, {0, 0, 0, 1},
        {0, 0, 1, 0}, {0, 1, 0, 0}, {0, 0, 0, 0}, {0, 1, 0, 0},
    };
  } else if (letter == '!') {
    return {
        {0}, {1}, {1}, {1}, {1}, {1}, {0}, {1},
    };
  } else if (letter == '.') {
    return {
        {0}, {0}, {0}, {0}, {0}, {0}, {0}, {1},
    };
  } else if (letter == ',') {
    return {
        {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 1}, {1, 0},
    };
  } else if (letter == ':') {
    return {
        {0}, {0}, {0}, {0}, {1}, {0}, {0}, {1},
    };
  } else if (letter == ';') {
    return {
        {0, 0}, {0, 0}, {0, 0}, {0, 1}, {0, 0}, {0, 0}, {0, 1}, {1, 0},
    };
  } else if (letter == '~') {
    return {
        {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 1, 0, 1},
        {1, 0, 1, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0},
    };
  } else if (letter == '(') {
    return {
        {0, 0}, {0, 1}, {1, 0}, {1, 0}, {1, 0}, {1, 0}, {1, 0}, {0, 1},
    };
  } else if (letter == ')') {
    return {
        {0, 0}, {1, 0}, {0, 1}, {0, 1}, {0, 1}, {0, 1}, {0, 1}, {1, 0},
    };
  } else if (letter == '"') {
    return {
        {0, 0, 0, 0, 0}, {0, 1, 0, 1, 0}, {0, 1, 0, 1, 0}, {0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0},
    };
  } else if (letter == '/') {
    return {
        {0, 0, 0}, {0, 0, 1}, {0, 0, 1}, {0, 1, 0},
        {0, 1, 0}, {0, 1, 0}, {1, 0, 0}, {1, 0, 0},
    };
  } else if (letter == '-') {
    return {
        {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0},
        {1, 1, 1}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0},
    };
  } else if (letter == '+') {
    return {
        {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {0, 1, 0},
        {1, 1, 1}, {0, 1, 0}, {0, 0, 0}, {0, 0, 0},
    };
  }

  return {
      {}, {}, {}, {}, {}, {}, {}, {},
  };
}

std::vector<std::vector<bool>> convert_string_to_bitmap(const char *text) {
  Serial.print("Converting string to bitmap: ");
  Serial.println(text);
  auto length = strlen(text);

  std::vector<std::vector<bool>> fullMap;

  for (int i = 0; i < 8; ++i) {
    fullMap.push_back({});
  }

  for (int i = 0; i < length; ++i) {
    auto map = convert_letter_to_bitmap(text[i]);

    for (int j = 0; j < 8; ++j) {
      fullMap[j].insert(fullMap[j].end(), map[j].begin(), map[j].end());
    }

    if (i < length - 1) {

      for (int j = 0; j < 8; ++j) {
        fullMap[j].push_back(0);
      }
    }
  }
  return fullMap;
}

void log_bitmap_human_readable(std::vector<std::vector<bool>> &bitmap) {
  Serial.println("Logging bitmap");
  if (bitmap.size() == 0) {
    Serial.println("Bitmap is empty");
    return;
  }
  auto numberOfColumns = bitmap[0].size();
  for (int j = 0; j < 8; ++j) {
    for (int i = 0; i < numberOfColumns; ++i) {
      if (bitmap[j][i]) {
        Serial.print('#');
      } else {
        Serial.print('.');
      }
    }
    Serial.println();
  }
}